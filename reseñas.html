<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacto - Byte</title>
    <link rel="icon" href="./images/favicon.png" type="image/x-icon">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@700;800;900&family=Lora:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@700;800;900&family=Lora:wght@400;700&display=swap"></noscript>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script type="module">
        // Importar las funciones necesarias de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Configuración de Tailwind CSS (Misma que tu página de reseñas)
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif'],
                        vision: ['Lora', 'serif'],
                    },
                    colors: {
                        'byte-dark-bg': '#0A0A1A',
                        'byte-accent-cyan': '#00FFFF',
                        'byte-light-bg': '#F8FAFC',
                        'byte-text-dark': '#374151',
                        'byte-text-light': '#F9FAFB',
                        'byte-secondary-dark': '#1A202C',
                    }
                }
            }
        }

        let db;

        document.addEventListener('DOMContentLoaded', async () => {
            // Inicializar Firebase
            // Asegúrate de que __firebase_config esté disponible globalmente o inyectado por tu entorno.
            const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);

            const contactForm = document.getElementById('contact-form');
            const messageBox = document.getElementById('message-box');

            if (contactForm) {
                contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const userName = document.getElementById('user-name').value;
                    const userEmail = document.getElementById('user-email').value;
                    const subject = document.getElementById('subject').value;
                    const message = document.getElementById('message').value;

                    if (!userName || !userEmail || !subject || !message) {
                        messageBox.innerHTML = `<p class="text-red-500">Por favor, completa todos los campos.</p>`;
                        setTimeout(() => messageBox.innerHTML = '', 3000);
                        return;
                    }
                    
                    // Validación básica de email
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(userEmail)) {
                        messageBox.innerHTML = `<p class="text-red-500">Por favor, introduce un correo electrónico válido.</p>`;
                        setTimeout(() => messageBox.innerHTML = '', 3000);
                        return;
                    }

                    // Mostrar indicador de carga
                    messageBox.innerHTML = `<p class="text-blue-400">Enviando mensaje...</p>`;
                    contactForm.querySelector('button[type="submit"]').disabled = true;

                    try {
                        // La variable __app_id debería ser definida globalmente o inyectada por tu entorno de despliegue.
                        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                        const contactsCollectionRef = collection(db, `artifacts/${appId}/public/data/contacts`);

                        await addDoc(contactsCollectionRef, {
                            userName: userName,
                            userEmail: userEmail,
                            subject: subject,
                            message: message,
                            timestamp: serverTimestamp()
                        });

                        messageBox.innerHTML = `<p class="text-green-500">¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto.</p>`;
                        setTimeout(() => messageBox.innerHTML = '', 5000);

                        contactForm.reset(); // Limpiar el formulario
                    } catch (e) {
                        console.error("Error al enviar mensaje de contacto: ", e);
                        messageBox.innerHTML = `<p class="text-red-500">Hubo un error al enviar tu mensaje. Inténtalo de nuevo.</p>`;
                        setTimeout(() => messageBox.innerHTML = '', 3000);
                    } finally {
                        contactForm.querySelector('button[type="submit"]').disabled = false;
                    }
                });
            }
        });
    </script>

    <style>
        /* Estilos básicos para la fuente y comportamiento de scroll (igual que tu página de reseñas) */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
        }
    </style>
</head>
<body class="bg-byte-dark-bg text-byte-text-light min-h-screen flex flex-col">

    <header class="bg-byte-dark-bg shadow-lg py-4 sticky top-0 z-50 border-b border-byte-accent-cyan">
        <div class="container mx-auto px-4 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <a href="index.html" class="flex items-center" aria-label="Go to main page">
                    <span class="text-4xl font-extrabold text-byte-accent-cyan block">Byte</span>
                </a>
                <span class="font-vision text-gray-100 text-sm md:text-lg font-light animate-subtle-fade">Tu visión, nuestra misión</span>
            </div>
            <a href="index.html#contacto" class="bg-yellow-500 text-black font-bold py-2 px-6 rounded-full
                                        shadow-lg hover:bg-yellow-600 transition duration-300 transform hover:scale-105">
                ¡Volver al Inicio!
            </a>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-12">
        <h1 class="text-5xl md:text-6xl font-extrabold text-center text-byte-accent-cyan mb-12"
            data-aos="fade-up" data-aos-duration="1000">Contáctanos</h1>

        <section class="bg-byte-secondary-dark p-8 rounded-xl shadow-2xl max-w-2xl mx-auto mb-12"
            data-aos="fade-up" data-aos-delay="200" data-aos-duration="1000">
            <h2 class="text-3xl font-bold text-center text-byte-accent-cyan mb-8">Envíanos un Mensaje</h2>
            <form id="contact-form" class="space-y-6">
                <div>
                    <label for="user-name" class="block text-lg font-semibold text-byte-text-light mb-2">Tu Nombre</label>
                    <input type="text" id="user-name" name="userName" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-byte-accent-cyan focus:border-transparent" placeholder="Tu nombre completo" required>
                </div>
                <div>
                    <label for="user-email" class="block text-lg font-semibold text-byte-text-light mb-2">Tu Correo Electrónico</label>
                    <input type="email" id="user-email" name="userEmail" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-byte-accent-cyan focus:border-transparent" placeholder="tu.correo@ejemplo.com" required>
                </div>
                <div>
                    <label for="subject" class="block text-lg font-semibold text-byte-text-light mb-2">Asunto</label>
                    <input type="text" id="subject" name="subject" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-byte-accent-cyan focus:border-transparent" placeholder="Pregunta sobre un servicio, Soporte, etc." required>
                </div>
                <div>
                    <label for="message" class="block text-lg font-semibold text-byte-text-light mb-2">Tu Mensaje</label>
                    <textarea id="message" name="message" rows="5" class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-byte-accent-cyan focus:border-transparent" placeholder="Escribe tu mensaje aquí..." required></textarea>
                </div>
                <button type="submit" class="w-full bg-byte-accent-cyan text-byte-dark-bg font-bold py-3 px-6 rounded-full shadow-lg hover:bg-yellow-400 transition duration-300 transform hover:scale-105 text-lg">
                    Enviar Mensaje
                </button>
                <div id="message-box" class="mt-4 text-center text-sm text-gray-400"></div>
            </form>
            <div class="mt-8 p-4 bg-gray-700 rounded-lg text-gray-300 text-center text-sm">
                <p>💬 Al enviar este formulario, aceptas que recopilemos tu nombre, correo electrónico, asunto y mensaje para poder responder a tu consulta.</p>
            </div>
        </section>

        <section class="max-w-xl mx-auto mt-12 text-center"
            data-aos="fade-up" data-aos-delay="300" data-aos-duration="1000">
            <h2 class="text-3xl font-bold text-byte-accent-cyan mb-6">¿Prefieres otros medios?</h2>
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                <div class="bg-byte-secondary-dark p-6 rounded-lg shadow-md flex items-center space-x-3 w-full md:w-auto">
                    <i class="fas fa-envelope text-byte-accent-cyan text-2xl"></i>
                    <p class="text-lg text-gray-300">info@byte.com</p>
                </div>
                <div class="bg-byte-secondary-dark p-6 rounded-lg shadow-md flex items-center space-x-3 w-full md:w-auto">
                    <i class="fas fa-phone-alt text-byte-accent-cyan text-2xl"></i>
                    <p class="text-lg text-gray-300">+123 456 7890</p>
                </div>
            </div>
            <p class="text-gray-400 text-sm mt-6">También puedes encontrarnos en nuestras redes sociales (enlace a tu página principal).</p>
        </section>
    </main>

    <footer class="bg-byte-dark-bg text-byte-text-light py-6 border-t border-byte-accent-cyan mt-auto">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm text-gray-400">© <span id="current-year-footer"></span> Byte. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            once: true,
            duration: 1000,
            easing: 'ease-in-out',
        });

        document.getElementById('current-year-footer').textContent = new Date().getFullYear();
    </script>
</body>
</html>
